<!DOCTYPE html>
{% extends 'base_lux.html' %}
<html>
  <head>
    {% load staticfiles %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Preceptor</title>

    <!-- link custom css -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">

    <!-- import custom script -->
    <script src="{% static 'js/functions.js' %}" type="text/javascript"></script>
  </head>
  <body>
    {% block content %}
    <!-- Lux Navbar -->
    <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-primary">
      <a class="navbar-brand" href="#profile" data-toggle="tab">PRECEPTOR</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    
      <div class="collapse navbar-collapse" id="navbarColor01">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#students" data-toggle="tab">
              Students
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#f2" data-toggle="tab">F2</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#f3" data-toggle="tab">F3</a>
          </li>
        </ul>
        <a class="btn btn-secondary my-2 my-sm-0" href='{% url "logout" %}'>Logout</a>
      </div>
    </nav>

    <!-- Nav links data toggle -->
    <main role="main" class="container">
      <div style="padding-top: 50px" class="tab-content">

        <!-- Students tab (active) -->
        <div class="tab-pane active" id="students">
          <div class="container">
            {% for year in years %}  <!-- Search by course -->   
            <div class="row">
              <legend>{{ year.year_number }} - {{ year.division | upper }}</legend>
              {% for student in year.students %}
              <div class='col-sm'>
                <!-- Lux Student Card -->
                <div class="card border-info mb-3" style="max-width: 20rem;">
                  <center><h3 class="card-header">{{ student.list_number }}</h3></center>
                  <div class="card-body">
                    <h5 class="card-title">{{ student.last_name}} {{ student.first_name }}</h5>
                    <h6 class="card-subtitle text-muted">DNI: {{ student.dni }}</h6>
                  </div>
                  <img style="height: 184px; width: 100%; display: block;" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22318%22%20height%3D%22180%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20318%20180%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_158bd1d28ef%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.75)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A16pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_158bd1d28ef%22%3E%3Crect%20width%3D%22318%22%20height%3D%22180%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22129.359375%22%20y%3D%2297.35%22%3EImage%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" alt="Card image">
                </div>
              </div>
              {% if forloop.counter|divisibleby:4 %}</div><div class="row">{% endif %}
              {% endfor %}
            </div>
            {% endfor %}
          </div>
        </div>

        <!-- F2 tab -->
        <div class="tab-pane active" id="f2">
          <div class="container">
            <div class="row">
              <div class="col-sm">
                <div class="card border-primary mb-3" style="max-width: 20rem;">
                  <div class="card-header">FORM</div>
                  <div style='background-color: #eee' class="card-body">
                    <h4 class="card-title">Create F2</h4>
                    <p class="card-text">Fill the blanks below</p>
                    <!-- F2 form -->
                    <form action="{% url 'create_f2' %}" method="POST" accept-charset="utf-8">
                      {% csrf_token %}
                      <fieldset>                     
                        <!-- Year -->
                        <div class="form-group">
                          <label for="exampleSelect1">Year</label>
                          <select class="form-control" id="exampleSelect1">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                          </select>
                        </div>
                        <!-- Hour -->
                        <div class="form-group">
                          <label class="col-form-label" for="inputDefault">Hour</label>
                          <input type="text" class="form-control" placeholder="HH:MIN" id="inputDefault">
                        </div>
                        <!-- Reason -->
                        <div class="form-group">
                          <label for="exampleTextarea">Reason</label>
                          <textarea class="form-control" id="exampleTextarea" rows="3"></textarea>
                        </div>
                        <!-- Submit -->
                        <button type="submit" class="btn btn-primary">Submit</button>
                      </fieldset>
                    </form>
                  </div>
                </div>
              </div>
              <div class='col-sm'>
                <!-- Lux Approved F2 Card -->
                {% for a in all_approved_f2 %}
                <div class="card text-white bg-success mb-3" style="max-width: 20rem;">
                  <div class="card-header"><center>{{a.date}} {{a.time}}</center></div>
                  <div class="card-body">
                    <h4 class="card-title">
                      {{a.student.first_name}} 
                      {{a.student.last_name}}
                    </h4>
                    <p class="card-text">{{a.motivo}}</p>
                  </div>
                </div>
                {% endfor %}
              </div>
              <div class='col-sm'>
                <!-- Lux Rejected F2 Card -->
                {% for r in all_rejected_f2 %}
                <div class="card text-white bg-danger mb-3" style="max-width: 20rem;">
                  <div class="card-header"><center>{{r.date}} {{r.time}}</center></div>
                  <div class="card-body">
                    <h4 class="card-title">
                      {{r.student.first_name}} 
                      {{r.student.last_name}}
                    </h4>
                    <p class="card-text">{{r.motivo}}</p>
                  </div>
                </div>
                {% endfor %}
              </div>
              <div class='col-sm'>
                <!-- Lux On-Hold F2 Card -->
                {% for oh in all_on_hold_f2 %}
                <div class="card text-white bg-info mb-3" style="max-width: 20rem;">
                  <div class="card-header"><center>{{oh.date}} {{oh.time}}</center></div>
                  <div class="card-body">
                    <h4 class="card-title">
                      {{oh.student.first_name}} 
                      {{oh.student.last_name}}
                    </h4>
                    <p class="card-text">{{oh.motivo}}</p>
                  </div>
                </div>
                {% endfor %}                
              </div>
            </div>
          </div>
        </div>

        <!-- F3 tab -->
        <div class="tab-pane active" id="f3">
          <div class="container">
            <div class="row">
            </div>
          </div>
        </div>

        <!-- Preceptor's profile tab -->
        <div class="tab-pane active" id="profile">
          <div class="container">
            <div class="row">
            </div>
          </div>
        </div>

      </div>
    </main>
    {% endblock content %}


    <nav class="navbar navbar-expand-lg navbar-light bg-primary">
      <div class="container">
        <a class="navbar-brand" href="{% url 'index_preceptor' %}"><i class="fa fa-user-secret"></i></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbar">
          <ul class="navbar-nav nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#f2" data-toggle="tab">F2</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#f3" data-toggle="tab">F3</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#students" data-toggle="tab">Students</a>
            </li>
          </ul>
          <a href="/logout" title="Logout">Log out</a>
        </div>
      </div>
    </nav>

    <main role="main" class="container">
      <div class="tab-content">

        <div class="tab-pane active" id="f2">
          <div class="jumbotron">
            <div class="container">
              <h1 class="display-4">Create F2</h1>
              <form action="{% url 'create_f2' %}" method="POST" accept-charset="utf-8">
                {% csrf_token %}
                <!-- Aqui va el F2 -->
                <div class="form-group">
                  <fieldset class="checkboxgroup" id="yearCheckbox">
                    <div class="row">
                      <legend class="col-md-3 col-sm-12">Select Year</legend>
                      <input class="col-md-3 offset-md-6" placeholder="Filter" type="text" id="year-filter-f2">
                    </div>
                    <div class="row" id="yearlist">

                    </div>
                  </fieldset>
                </div>
                
                <div class="form-row">
                  <div class="form-group col-md-6 col-sm-12">
                    <label for="time">Hour</label>
                    <input type="time" class="form-control" name="time" id="time">
                  </div>

                  <div class="form-group col-md-6 col-sm-12">
                    <label for="reason">Reason</label>
                    <input type="text" name="reason" class="form-control">
                  </div>
                </div>
                <button type="submit" class="btn">Create</button>
              </form>
            </div>
          </div>
          <div class="container">
            <div class="row" id="f2list">

            </div>
          </div>
        </div>



      <div class="tab-pane" id="f3">
        <div class="container">
          <div class="row">


            <div class="col-md-3 col-sm-10">
              <div class='card text-white bg-info' style='margin-bottom:20px'>
                <div class='card-header'>F3</div>
                <div class='card-body'>
                  <h5 class='card-title'>Student Name</h5>
                  <p class='card-text'>
                    Reason
                  </p>
                  <ul class='list-group list-group-flush'>
                    <li class='list-group-item bg-dark'>YYYY/MM/DD HH:MM</li>
                  </ul>
                </div>
              </div>
            </div>


          </div>
        </div>
      </div>


        <div class="tab-pane" id="students">

          <div class="container">
            {% for year in years %}
            <div class="jumbotron">
            <legend>{{ year.year_number }} - {{ year.division | upper }}</legend>
              <div class="row">

                {% for student in year.students %}
                <div class="col-md-3 col-sm-10">
                  <div class='card text-white bg-info' style='margin-bottom:20px'>
                    <img class="card-img-top" src="{% static "img/generic.jpg" %}" alt="Card image cap">
                    <div class='card-header'>{{ student.status }}</div>
                    <div class='card-body'>
                      <h5 class='card-title'>{{ student.last_name }} {{ student.first_name }}</h5>
                      <ul class='list-group list-group-flush'>
                        <li class='list-group-item bg-dark mx-auto'><button type="button" class="btn btn-primary">Parents</button></li>
                      </ul>
                    </div>
                  </div>
                </div>
                {% endfor %}

              </div>
            </div>
            {% endfor %}
          </div>

        </div>

      </div>
    </main>

  </body>
</html>